(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&e(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function R(){}const Dt=o=>o;function Bt(o){return o()}function Et(){return Object.create(null)}function F(o){o.forEach(Bt)}function _t(o){return typeof o=="function"}function lt(o,n){return o!=o?n==n:o!==n||o&&typeof o=="object"||typeof o=="function"}let nt;function Tt(o,n){return nt||(nt=document.createElement("a")),nt.href=n,o===nt.href}function te(o){return Object.keys(o).length===0}function ee(o,...n){if(o==null)return R;const t=o.subscribe(...n);return t.unsubscribe?()=>t.unsubscribe():t}function Gt(o,n,t){o.$$.on_destroy.push(ee(n,t))}const zt=typeof window<"u";let ne=zt?()=>window.performance.now():()=>Date.now(),St=zt?o=>requestAnimationFrame(o):R;const H=new Set;function Ht(o){H.forEach(n=>{n.c(o)||(H.delete(n),n.f())}),H.size!==0&&St(Ht)}function ie(o){let n;return H.size===0&&St(Ht),{promise:new Promise(t=>{H.add(n={c:o,f:t})}),abort(){H.delete(n)}}}function g(o,n){o.appendChild(n)}function Jt(o){if(!o)return document;const n=o.getRootNode?o.getRootNode():o.ownerDocument;return n&&n.host?n:o.ownerDocument}function oe(o){const n=O("style");return re(Jt(o),n),n.sheet}function re(o,n){return g(o.head||o,n),n.sheet}function x(o,n,t){o.insertBefore(n,t||null)}function A(o){o.parentNode&&o.parentNode.removeChild(o)}function O(o){return document.createElement(o)}function q(o){return document.createTextNode(o)}function $(){return q(" ")}function Kt(){return q("")}function M(o,n,t,e){return o.addEventListener(n,t,e),()=>o.removeEventListener(n,t,e)}function Wt(o){return function(n){return n.preventDefault(),o.call(this,n)}}function S(o,n,t){t==null?o.removeAttribute(n):o.getAttribute(n)!==t&&o.setAttribute(n,t)}function se(o){return Array.from(o.childNodes)}function ft(o,n){n=""+n,o.wholeText!==n&&(o.data=n)}function z(o,n){o.value=n??""}function ue(o,n,{bubbles:t=!1,cancelable:e=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(o,t,e,n),i}const st=new Map;let ut=0;function ae(o){let n=5381,t=o.length;for(;t--;)n=(n<<5)-n^o.charCodeAt(t);return n>>>0}function ce(o,n){const t={stylesheet:oe(n),rules:{}};return st.set(o,t),t}function jt(o,n,t,e,i,r,s,u=0){const a=16.666/e;let l=`{
`;for(let w=0;w<=1;w+=a){const f=n+(t-n)*r(w);l+=w*100+`%{${s(f,1-f)}}
`}const p=l+`100% {${s(t,1-t)}}
}`,c=`__svelte_${ae(p)}_${u}`,d=Jt(o),{stylesheet:h,rules:v}=st.get(d)||ce(d,o);v[c]||(v[c]=!0,h.insertRule(`@keyframes ${c} ${p}`,h.cssRules.length));const b=o.style.animation||"";return o.style.animation=`${b?`${b}, `:""}${c} ${e}ms linear ${i}ms 1 both`,ut+=1,c}function le(o,n){const t=(o.style.animation||"").split(", "),e=t.filter(n?r=>r.indexOf(n)<0:r=>r.indexOf("__svelte")===-1),i=t.length-e.length;i&&(o.style.animation=e.join(", "),ut-=i,ut||de())}function de(){St(()=>{ut||(st.forEach(o=>{const{ownerNode:n}=o.stylesheet;n&&A(n)}),st.clear())})}let Y;function Q(o){Y=o}function dt(){if(!Y)throw new Error("Function called outside component initialization");return Y}function pe(o){dt().$$.before_update.push(o)}function he(o){dt().$$.on_mount.push(o)}function fe(o){dt().$$.after_update.push(o)}function me(o){dt().$$.on_destroy.push(o)}function ve(o,n){const t=o.$$.callbacks[n.type];t&&t.slice().forEach(e=>e.call(this,n))}const G=[],mt=[],ot=[],At=[],be=Promise.resolve();let vt=!1;function ye(){vt||(vt=!0,be.then(Vt))}function J(o){ot.push(o)}const pt=new Set;let D=0;function Vt(){if(D!==0)return;const o=Y;do{try{for(;D<G.length;){const n=G[D];D++,Q(n),ge(n.$$)}}catch(n){throw G.length=0,D=0,n}for(Q(null),G.length=0,D=0;mt.length;)mt.pop()();for(let n=0;n<ot.length;n+=1){const t=ot[n];pt.has(t)||(pt.add(t),t())}ot.length=0}while(G.length);for(;At.length;)At.pop()();vt=!1,pt.clear(),Q(o)}function ge(o){if(o.fragment!==null){o.update(),F(o.before_update);const n=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,n),o.after_update.forEach(J)}}let W;function we(){return W||(W=Promise.resolve(),W.then(()=>{W=null})),W}function ht(o,n,t){o.dispatchEvent(ue(`${n?"intro":"outro"}${t}`))}const rt=new Set;let L;function Qt(){L={r:0,c:[],p:L}}function Yt(){L.r||F(L.c),L=L.p}function U(o,n){o&&o.i&&(rt.delete(o),o.i(n))}function K(o,n,t,e){if(o&&o.o){if(rt.has(o))return;rt.add(o),L.c.push(()=>{rt.delete(o),e&&(t&&o.d(1),e())}),o.o(n)}else e&&e()}const _e={duration:0};function at(o,n,t,e){const i={direction:"both"};let r=n(o,t,i),s=e?0:1,u=null,a=null,l=null;function p(){l&&le(o,l)}function c(h,v){const b=h.b-s;return v*=Math.abs(b),{a:s,b:h.b,d:b,duration:v,start:h.start,end:h.start+v,group:h.group}}function d(h){const{delay:v=0,duration:b=300,easing:w=Dt,tick:f=R,css:m}=r||_e,_={start:ne()+v,b:h};h||(_.group=L,L.r+=1),u||a?a=_:(m&&(p(),l=jt(o,s,h,b,v,w,m)),h&&f(0,1),u=c(_,b),J(()=>ht(o,h,"start")),ie(y=>{if(a&&y>a.start&&(u=c(a,b),a=null,ht(o,u.b,"start"),m&&(p(),l=jt(o,s,u.b,u.duration,0,w,r.css))),u){if(y>=u.end)f(s=u.b,1-s),ht(o,u.b,"end"),a||(u.b?p():--u.group.r||F(u.group.c)),u=null;else if(y>=u.start){const k=y-u.start;s=u.a+u.d*w(k/u.duration),f(s,1-s)}}return!!(u||a)}))}return{run(h){_t(r)?we().then(()=>{r=r(i),d(h)}):d(h)},end(){p(),u=a=null}}}function Se(o,n){K(o,1,1,()=>{n.delete(o.key)})}function Ce(o,n,t,e,i,r,s,u,a,l,p,c){let d=o.length,h=r.length,v=d;const b={};for(;v--;)b[o[v].key]=v;const w=[],f=new Map,m=new Map;for(v=h;v--;){const C=c(i,r,v),T=t(C);let j=s.get(T);j?e&&j.p(C,n):(j=l(T,C),j.c()),f.set(T,w[v]=j),T in b&&m.set(T,Math.abs(v-b[T]))}const _=new Set,y=new Set;function k(C){U(C,1),C.m(u,p),s.set(C.key,C),p=C.first,h--}for(;d&&h;){const C=w[h-1],T=o[d-1],j=C.key,et=T.key;C===T?(p=C.first,d--,h--):f.has(et)?!s.has(j)||_.has(j)?k(C):y.has(et)?d--:m.get(j)>m.get(et)?(y.add(j),k(C)):(_.add(et),d--):(a(T,s),d--)}for(;d--;){const C=o[d];f.has(C.key)||a(C,s)}for(;h;)k(w[h-1]);return w}function Rt(o){o&&o.c()}function bt(o,n,t,e){const{fragment:i,after_update:r}=o.$$;i&&i.m(n,t),e||J(()=>{const s=o.$$.on_mount.map(Bt).filter(_t);o.$$.on_destroy?o.$$.on_destroy.push(...s):F(s),o.$$.on_mount=[]}),r.forEach(J)}function yt(o,n){const t=o.$$;t.fragment!==null&&(F(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}function Oe(o,n){o.$$.dirty[0]===-1&&(G.push(o),ye(),o.$$.dirty.fill(0)),o.$$.dirty[n/31|0]|=1<<n%31}function Ct(o,n,t,e,i,r,s,u=[-1]){const a=Y;Q(o);const l=o.$$={fragment:null,ctx:[],props:r,update:R,not_equal:i,bound:Et(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(a?a.$$.context:[])),callbacks:Et(),dirty:u,skip_bound:!1,root:n.target||a.$$.root};s&&s(l.root);let p=!1;if(l.ctx=t?t(o,n.props||{},(c,d,...h)=>{const v=h.length?h[0]:d;return l.ctx&&i(l.ctx[c],l.ctx[c]=v)&&(!l.skip_bound&&l.bound[c]&&l.bound[c](v),p&&Oe(o,c)),d}):[],l.update(),p=!0,F(l.before_update),l.fragment=e?e(l.ctx):!1,n.target){if(n.hydrate){const c=se(n.target);l.fragment&&l.fragment.l(c),c.forEach(A)}else l.fragment&&l.fragment.c();n.intro&&U(o.$$.fragment),bt(o,n.target,n.anchor,n.customElement),Vt()}Q(a)}class Ot{$destroy(){yt(this,1),this.$destroy=R}$on(n,t){if(!_t(t))return R;const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{const i=e.indexOf(t);i!==-1&&e.splice(i,1)}}$set(n){this.$$set&&!te(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}var gt=function(o,n){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},gt(o,n)};function P(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=o}gt(o,n),o.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var wt=function(){return wt=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var r in t=arguments[e])Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n},wt.apply(this,arguments)};function I(o,n,t,e){return new(t||(t=Promise))(function(i,r){function s(l){try{a(e.next(l))}catch(p){r(p)}}function u(l){try{a(e.throw(l))}catch(p){r(p)}}function a(l){l.done?i(l.value):function(c){return c instanceof t?c:new t(function(d){d(c)})}(l.value).then(s,u)}a((e=e.apply(o,n||[])).next())})}function E(o,n){var t,e,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function u(a){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,e&&(i=2&c[0]?e.return:c[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,c[1])).done)return i;switch(e=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,e=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=n.call(o,s)}catch(d){c=[6,d],e=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([a,l])}}}var Zt,Z=function(o){function n(t){var e,i,r,s,u=this;return(u=o.call(this,"ClientResponseError")||this).url="",u.status=0,u.response={},u.isAbort=!1,u.originalError=null,Object.setPrototypeOf(u,n.prototype),t instanceof n||(u.originalError=t),t!==null&&typeof t=="object"&&(u.url=typeof t.url=="string"?t.url:"",u.status=typeof t.status=="number"?t.status:0,u.response=t.data!==null&&typeof t.data=="object"?t.data:{},u.isAbort=!!t.isAbort),typeof DOMException<"u"&&t instanceof DOMException&&(u.isAbort=!0),u.name="ClientResponseError "+u.status,u.message=(e=u.response)===null||e===void 0?void 0:e.message,u.message||(u.isAbort?u.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((s=(r=(i=u.originalError)===null||i===void 0?void 0:i.cause)===null||r===void 0?void 0:r.message)===null||s===void 0)&&s.includes("ECONNREFUSED ::1")?u.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":u.message="Something went wrong while processing your request."),u}return P(n,o),Object.defineProperty(n.prototype,"data",{get:function(){return this.response},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return wt({},this)},n}(Error),it=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function xt(o,n,t){var e=Object.assign({},t||{}),i=e.encode||ke;if(!it.test(o))throw new TypeError("argument name is invalid");var r=i(n);if(r&&!it.test(r))throw new TypeError("argument val is invalid");var s=o+"="+r;if(e.maxAge!=null){var u=e.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(u)}if(e.domain){if(!it.test(e.domain))throw new TypeError("option domain is invalid");s+="; Domain="+e.domain}if(e.path){if(!it.test(e.path))throw new TypeError("option path is invalid");s+="; Path="+e.path}if(e.expires){if(!function(l){return Object.prototype.toString.call(l)==="[object Date]"||l instanceof Date}(e.expires)||isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function Pe(o){return o.indexOf("%")!==-1?decodeURIComponent(o):o}function ke(o){return encodeURIComponent(o)}function $t(o){if(o)try{var n=decodeURIComponent(Zt(o.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)||{}}catch{}return{}}Zt=typeof atob=="function"?atob:function(o){var n=String(o).replace(/=+$/,"");if(n.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,e,i=0,r=0,s="";e=n.charAt(r++);~e&&(t=i%4?64*t+e:e,i++%4)?s+=String.fromCharCode(255&t>>(-2*i&6)):0)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e);return s};var X=function(){function o(n){n===void 0&&(n={}),this.load(n||{})}return o.prototype.load=function(n){for(var t=0,e=Object.entries(n);t<e.length;t++){var i=e[t],r=i[0],s=i[1];this[r]=s}this.id=n.id!==void 0?n.id:"",this.created=n.created!==void 0?n.created:"",this.updated=n.updated!==void 0?n.updated:""},Object.defineProperty(o.prototype,"isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),o.prototype.clone=function(){var n=typeof structuredClone=="function"?structuredClone(this):JSON.parse(JSON.stringify(this));return new this.constructor(n)},o.prototype.export=function(){return Object.assign({},this)},o}(),ct=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.load=function(t){o.prototype.load.call(this,t),this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.collectionName=typeof t.collectionName=="string"?t.collectionName:"",this.loadExpand(t.expand)},n.prototype.loadExpand=function(t){for(var e in t=t||{},this.expand={},t)Array.isArray(t[e])?this.expand[e]=t[e].map(function(i){return new n(i||{})}):this.expand[e]=new n(t[e]||{})},n}(X),Pt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.load=function(t){o.prototype.load.call(this,t),this.avatar=typeof t.avatar=="number"?t.avatar:0,this.email=typeof t.email=="string"?t.email:""},n}(X),Ie=function(){function o(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(o.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isValid",{get:function(){return!function(t,e){e===void 0&&(e=0);var i=$t(t);return!(Object.keys(i).length>0&&(!i.exp||i.exp-e>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),o.prototype.save=function(n,t){this.baseToken=n||"",this.baseModel=t!==null&&typeof t=="object"?t.collectionId!==void 0?new ct(t):new Pt(t):null,this.triggerChange()},o.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},o.prototype.loadFromCookie=function(n,t){t===void 0&&(t="pb_auth");var e=function(s,u){var a={};if(typeof s!="string")return a;for(var l=Object.assign({},u||{}).decode||Pe,p=0;p<s.length;){var c=s.indexOf("=",p);if(c===-1)break;var d=s.indexOf(";",p);if(d===-1)d=s.length;else if(d<c){p=s.lastIndexOf(";",c-1)+1;continue}var h=s.slice(p,c).trim();if(a[h]===void 0){var v=s.slice(c+1,d).trim();v.charCodeAt(0)===34&&(v=v.slice(1,-1));try{a[h]=l(v)}catch{a[h]=v}}p=d+1}return a}(n||"")[t]||"",i={};try{(typeof(i=JSON.parse(e))===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)},o.prototype.exportToCookie=function(n,t){var e,i,r;t===void 0&&(t="pb_auth");var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},u=$t(this.token);u!=null&&u.exp?s.expires=new Date(1e3*u.exp):s.expires=new Date("1970-01-01"),n=Object.assign({},s,n);var a={token:this.token,model:((e=this.model)===null||e===void 0?void 0:e.export())||null},l=xt(t,JSON.stringify(a),n),p=typeof Blob<"u"?new Blob([l]).size:l.length;return a.model&&p>4096&&(a.model={id:(i=a==null?void 0:a.model)===null||i===void 0?void 0:i.id,email:(r=a==null?void 0:a.model)===null||r===void 0?void 0:r.email},this.model instanceof ct&&(a.model.username=this.model.username,a.model.verified=this.model.verified,a.model.collectionId=this.model.collectionId),l=xt(t,JSON.stringify(a),n)),l},o.prototype.onChange=function(n,t){var e=this;return t===void 0&&(t=!1),this._onChangeCallbacks.push(n),t&&n(this.token,this.model),function(){for(var i=e._onChangeCallbacks.length-1;i>=0;i--)if(e._onChangeCallbacks[i]==n)return delete e._onChangeCallbacks[i],void e._onChangeCallbacks.splice(i,1)}},o.prototype.triggerChange=function(){for(var n=0,t=this._onChangeCallbacks;n<t.length;n++){var e=t[n];e&&e(this.token,this.model)}},o}(),Ee=function(o){function n(t){t===void 0&&(t="pocketbase_auth");var e=o.call(this)||this;return e.storageFallback={},e.storageKey=t,e}return P(n,o),Object.defineProperty(n.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"model",{get:function(){var t,e=this._storageGet(this.storageKey)||{};return e===null||typeof e!="object"||e.model===null||typeof e.model!="object"?null:((t=e.model)===null||t===void 0?void 0:t.collectionId)===void 0?new Pt(e.model):new ct(e.model)},enumerable:!1,configurable:!0}),n.prototype.save=function(t,e){this._storageSet(this.storageKey,{token:t,model:e}),o.prototype.save.call(this,t,e)},n.prototype.clear=function(){this._storageRemove(this.storageKey),o.prototype.clear.call(this)},n.prototype._storageGet=function(t){if(typeof window<"u"&&(window!=null&&window.localStorage)){var e=window.localStorage.getItem(t)||"";try{return JSON.parse(e)}catch{return e}}return this.storageFallback[t]},n.prototype._storageSet=function(t,e){if(typeof window<"u"&&(window!=null&&window.localStorage)){var i=e;typeof e!="string"&&(i=JSON.stringify(e)),window.localStorage.setItem(t,i)}else this.storageFallback[t]=e},n.prototype._storageRemove=function(t){var e;typeof window<"u"&&(window!=null&&window.localStorage)&&((e=window.localStorage)===null||e===void 0||e.removeItem(t)),delete this.storageFallback[t]},n}(Ie),tt=function(n){this.client=n},Te=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.getAll=function(t){return t===void 0&&(t={}),this.client.send("/api/settings",{method:"GET",params:t}).then(function(e){return e||{}})},n.prototype.update=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send("/api/settings",{method:"PATCH",params:e,body:t}).then(function(i){return i||{}})},n.prototype.testS3=function(t){return t===void 0&&(t={}),this.client.send("/api/settings/test/s3",{method:"POST",params:t}).then(function(){return!0})},n.prototype.testEmail=function(t,e,i){i===void 0&&(i={});var r={email:t,template:e};return this.client.send("/api/settings/test/email",{method:"POST",params:i,body:r}).then(function(){return!0})},n}(tt),Xt=function(n,t,e,i,r){this.page=n>0?n:1,this.perPage=t>=0?t:0,this.totalItems=e>=0?e:0,this.totalPages=i>=0?i:0,this.items=r||[]},kt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.getFullList=function(t,e){if(typeof t=="number")return this._getFullList(this.baseCrudPath,t,e);var i=Object.assign({},t,e);return this._getFullList(this.baseCrudPath,i.batch||200,i)},n.prototype.getList=function(t,e,i){return t===void 0&&(t=1),e===void 0&&(e=30),i===void 0&&(i={}),this._getList(this.baseCrudPath,t,e,i)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),this._getFirstListItem(this.baseCrudPath,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),this._getOne(this.baseCrudPath,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this._create(this.baseCrudPath,t,e)},n.prototype.update=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),this._update(this.baseCrudPath,t,e,i)},n.prototype.delete=function(t,e){return e===void 0&&(e={}),this._delete(this.baseCrudPath,t,e)},n}(function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype._getFullList=function(t,e,i){var r=this;e===void 0&&(e=200),i===void 0&&(i={});var s=[],u=function(a){return I(r,void 0,void 0,function(){return E(this,function(l){return[2,this._getList(t,a,e||200,i).then(function(p){var c=p,d=c.items,h=c.totalItems;return s=s.concat(d),d.length&&h>s.length?u(a+1):s})]})})};return u(1)},n.prototype._getList=function(t,e,i,r){var s=this;return e===void 0&&(e=1),i===void 0&&(i=30),r===void 0&&(r={}),r=Object.assign({page:e,perPage:i},r),this.client.send(t,{method:"GET",params:r}).then(function(u){var a=[];if(u!=null&&u.items){u.items=u.items||[];for(var l=0,p=u.items;l<p.length;l++){var c=p[l];a.push(s.decode(c))}}return new Xt((u==null?void 0:u.page)||1,(u==null?void 0:u.perPage)||0,(u==null?void 0:u.totalItems)||0,(u==null?void 0:u.totalPages)||0,a)})},n.prototype._getOne=function(t,e,i){var r=this;return i===void 0&&(i={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"GET",params:i}).then(function(s){return r.decode(s)})},n.prototype._getFirstListItem=function(t,e,i){return i===void 0&&(i={}),i=Object.assign({filter:e,$cancelKey:"one_by_filter_"+t+"_"+e},i),this._getList(t,1,1,i).then(function(r){var s;if(!(!((s=r==null?void 0:r.items)===null||s===void 0)&&s.length))throw new Z({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})},n.prototype._create=function(t,e,i){var r=this;return e===void 0&&(e={}),i===void 0&&(i={}),this.client.send(t,{method:"POST",params:i,body:e}).then(function(s){return r.decode(s)})},n.prototype._update=function(t,e,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"PATCH",params:r,body:i}).then(function(u){return s.decode(u)})},n.prototype._delete=function(t,e,i){return i===void 0&&(i={}),this.client.send(t+"/"+encodeURIComponent(e),{method:"DELETE",params:i}).then(function(){return!0})},n}(tt)),je=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.decode=function(t){return new Pt(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),n.prototype.update=function(t,e,i){var r=this;return e===void 0&&(e={}),i===void 0&&(i={}),o.prototype.update.call(this,t,e,i).then(function(s){var u,a;return r.client.authStore.model&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.collectionId)===void 0&&((a=r.client.authStore.model)===null||a===void 0?void 0:a.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var i=this;return e===void 0&&(e={}),o.prototype.delete.call(this,t,e).then(function(r){var s,u;return r&&i.client.authStore.model&&((s=i.client.authStore.model)===null||s===void 0?void 0:s.collectionId)===void 0&&((u=i.client.authStore.model)===null||u===void 0?void 0:u.id)===t&&i.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.admin)||{});return t!=null&&t.token&&(t!=null&&t.admin)&&this.client.authStore.save(t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",admin:e})},n.prototype.authWithPassword=function(t,e,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:t,password:e},i),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:r,body:i}).then(this.authResponse.bind(this))},n.prototype.authRefresh=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(this.authResponse.bind(this))},n.prototype.requestPasswordReset=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:i,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:i},r),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n}(kt),Ae=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.load=function(t){o.prototype.load.call(this,t),this.recordId=typeof t.recordId=="string"?t.recordId:"",this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.provider=typeof t.provider=="string"?t.provider:"",this.providerId=typeof t.providerId=="string"?t.providerId:""},n}(X),Re=function(o){function n(t,e){var i=o.call(this,t)||this;return i.collectionIdOrName=e,i}return P(n,o),n.prototype.decode=function(t){return new ct(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),n.prototype.subscribeOne=function(t,e){return I(this,void 0,void 0,function(){return E(this,function(i){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,e)]})})},n.prototype.subscribe=function(t,e){return I(this,void 0,void 0,function(){var i;return E(this,function(r){if(typeof t=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,t)];if(!e)throw new Error("Missing subscription callback.");if(t==="")throw new Error("Missing topic.");return i=this.collectionIdOrName,t!=="*"&&(i+="/"+t),[2,this.client.realtime.subscribe(i,e)]})})},n.prototype.unsubscribe=function(t){return I(this,void 0,void 0,function(){return E(this,function(e){return t==="*"?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},n.prototype.getFullList=function(t,e){if(typeof t=="number")return o.prototype.getFullList.call(this,t,e);var i=Object.assign({},t,e);return o.prototype.getFullList.call(this,i)},n.prototype.getList=function(t,e,i){return t===void 0&&(t=1),e===void 0&&(e=30),i===void 0&&(i={}),o.prototype.getList.call(this,t,e,i)},n.prototype.getFirstListItem=function(t,e){return e===void 0&&(e={}),o.prototype.getFirstListItem.call(this,t,e)},n.prototype.getOne=function(t,e){return e===void 0&&(e={}),o.prototype.getOne.call(this,t,e)},n.prototype.create=function(t,e){return t===void 0&&(t={}),e===void 0&&(e={}),o.prototype.create.call(this,t,e)},n.prototype.update=function(t,e,i){var r=this;return e===void 0&&(e={}),i===void 0&&(i={}),o.prototype.update.call(this,t,e,i).then(function(s){var u,a,l;return((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)!==(s==null?void 0:s.id)||((a=r.client.authStore.model)===null||a===void 0?void 0:a.collectionId)!==r.collectionIdOrName&&((l=r.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==r.collectionIdOrName||r.client.authStore.save(r.client.authStore.token,s),s})},n.prototype.delete=function(t,e){var i=this;return e===void 0&&(e={}),o.prototype.delete.call(this,t,e).then(function(r){var s,u,a;return!r||((s=i.client.authStore.model)===null||s===void 0?void 0:s.id)!==t||((u=i.client.authStore.model)===null||u===void 0?void 0:u.collectionId)!==i.collectionIdOrName&&((a=i.client.authStore.model)===null||a===void 0?void 0:a.collectionName)!==i.collectionIdOrName||i.client.authStore.clear(),r})},n.prototype.authResponse=function(t){var e=this.decode((t==null?void 0:t.record)||{});return this.client.authStore.save(t==null?void 0:t.token,e),Object.assign({},t,{token:(t==null?void 0:t.token)||"",record:e})},n.prototype.listAuthMethods=function(t){return t===void 0&&(t={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:t}).then(function(e){return Object.assign({},e,{usernamePassword:!!(e!=null&&e.usernamePassword),emailPassword:!!(e!=null&&e.emailPassword),authProviders:Array.isArray(e==null?void 0:e.authProviders)?e==null?void 0:e.authProviders:[]})})},n.prototype.authWithPassword=function(t,e,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:t,password:e},i),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:r,body:i}).then(function(u){return s.authResponse(u)})},n.prototype.authWithOAuth2=function(t,e,i,r,s,u,a){var l=this;return s===void 0&&(s={}),u===void 0&&(u={}),a===void 0&&(a={}),u=Object.assign({provider:t,code:e,codeVerifier:i,redirectUrl:r,createData:s},u),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:a,body:u}).then(function(p){return l.authResponse(p)})},n.prototype.authRefresh=function(t,e){var i=this;return t===void 0&&(t={}),e===void 0&&(e={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:e,body:t}).then(function(r){return i.authResponse(r)})},n.prototype.requestPasswordReset=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:i,body:e}).then(function(){return!0})},n.prototype.confirmPasswordReset=function(t,e,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:e,passwordConfirm:i},r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},n.prototype.requestVerification=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),e=Object.assign({email:t},e),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:i,body:e}).then(function(){return!0})},n.prototype.confirmVerification=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),e=Object.assign({token:t},e),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:i,body:e}).then(function(){return!0})},n.prototype.requestEmailChange=function(t,e,i){return e===void 0&&(e={}),i===void 0&&(i={}),e=Object.assign({newEmail:t},e),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:i,body:e}).then(function(){return!0})},n.prototype.confirmEmailChange=function(t,e,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({token:t,password:e},i),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:r,body:i}).then(function(){return!0})},n.prototype.listExternalAuths=function(t,e){return e===void 0&&(e={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",{method:"GET",params:e}).then(function(i){var r=[];if(Array.isArray(i))for(var s=0,u=i;s<u.length;s++){var a=u[s];r.push(new Ae(a))}return r})},n.prototype.unlinkExternalAuth=function(t,e,i){return i===void 0&&(i={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(e),{method:"DELETE",params:i}).then(function(){return!0})},n}(kt),xe=function(){function o(n){n===void 0&&(n={}),this.load(n||{})}return o.prototype.load=function(n){this.id=n.id!==void 0?n.id:"",this.name=n.name!==void 0?n.name:"",this.type=n.type!==void 0?n.type:"text",this.system=!!n.system,this.required=!!n.required,this.unique=!!n.unique,this.options=typeof n.options=="object"&&n.options!==null?n.options:{}},o}(),$e=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.load=function(t){o.prototype.load.call(this,t),this.system=!!t.system,this.name=typeof t.name=="string"?t.name:"",this.type=typeof t.type=="string"?t.type:"base",this.options=t.options!==void 0?t.options:{},this.listRule=typeof t.listRule=="string"?t.listRule:null,this.viewRule=typeof t.viewRule=="string"?t.viewRule:null,this.createRule=typeof t.createRule=="string"?t.createRule:null,this.updateRule=typeof t.updateRule=="string"?t.updateRule:null,this.deleteRule=typeof t.deleteRule=="string"?t.deleteRule:null,t.schema=Array.isArray(t.schema)?t.schema:[],this.schema=[];for(var e=0,i=t.schema;e<i.length;e++){var r=i[e];this.schema.push(new xe(r))}},Object.defineProperty(n.prototype,"isBase",{get:function(){return this.type==="base"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAuth",{get:function(){return this.type==="auth"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isView",{get:function(){return this.type==="view"},enumerable:!1,configurable:!0}),n}(X),Le=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.decode=function(t){return new $e(t)},Object.defineProperty(n.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),n.prototype.import=function(t,e,i){return e===void 0&&(e=!1),i===void 0&&(i={}),I(this,void 0,void 0,function(){return E(this,function(r){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:i,body:{collections:t,deleteMissing:e}}).then(function(){return!0})]})})},n}(kt),Lt=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.load=function(t){o.prototype.load.call(this,t),t.remoteIp=t.remoteIp||t.ip,this.url=typeof t.url=="string"?t.url:"",this.method=typeof t.method=="string"?t.method:"GET",this.status=typeof t.status=="number"?t.status:200,this.auth=typeof t.auth=="string"?t.auth:"guest",this.remoteIp=typeof t.remoteIp=="string"?t.remoteIp:"",this.userIp=typeof t.userIp=="string"?t.userIp:"",this.referer=typeof t.referer=="string"?t.referer:"",this.userAgent=typeof t.userAgent=="string"?t.userAgent:"",this.meta=typeof t.meta=="object"&&t.meta!==null?t.meta:{}},n}(X),Ne=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.getRequestsList=function(t,e,i){return t===void 0&&(t=1),e===void 0&&(e=30),i===void 0&&(i={}),i=Object.assign({page:t,perPage:e},i),this.client.send("/api/logs/requests",{method:"GET",params:i}).then(function(r){var s=[];if(r!=null&&r.items){r.items=(r==null?void 0:r.items)||[];for(var u=0,a=r.items;u<a.length;u++){var l=a[u];s.push(new Lt(l))}}return new Xt((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,s)})},n.prototype.getRequest=function(t,e){return e===void 0&&(e={}),this.client.send("/api/logs/requests/"+encodeURIComponent(t),{method:"GET",params:e}).then(function(i){return new Lt(i)})},n.prototype.getRequestsStats=function(t){return t===void 0&&(t={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:t}).then(function(e){return e})},n}(tt),Ue=function(o){function n(){var t=o!==null&&o.apply(this,arguments)||this;return t.clientId="",t.eventSource=null,t.subscriptions={},t.lastSentTopics=[],t.maxConnectTimeout=15e3,t.reconnectAttempts=0,t.maxReconnectAttempts=1/0,t.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],t.pendingConnects=[],t}return P(n,o),Object.defineProperty(n.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),n.prototype.subscribe=function(t,e){var i;return I(this,void 0,void 0,function(){var r,s=this;return E(this,function(u){switch(u.label){case 0:if(!t)throw new Error("topic must be set.");return r=function(a){var l,p=a;try{l=JSON.parse(p==null?void 0:p.data)}catch{}e(l||{})},this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(r),this.isConnected?[3,2]:[4,this.connect()];case 1:return u.sent(),[3,5];case 2:return this.subscriptions[t].length!==1?[3,4]:[4,this.submitSubscriptions()];case 3:return u.sent(),[3,5];case 4:(i=this.eventSource)===null||i===void 0||i.addEventListener(t,r),u.label=5;case 5:return[2,function(){return I(s,void 0,void 0,function(){return E(this,function(a){return[2,this.unsubscribeByTopicAndListener(t,r)]})})}]}})})},n.prototype.unsubscribe=function(t){var e;return I(this,void 0,void 0,function(){var i,r,s;return E(this,function(u){switch(u.label){case 0:if(!this.hasSubscriptionListeners(t))return[2];if(t){for(i=0,r=this.subscriptions[t];i<r.length;i++)s=r[i],(e=this.eventSource)===null||e===void 0||e.removeEventListener(t,s);delete this.subscriptions[t]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:u.sent(),u.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByPrefix=function(t){var e;return I(this,void 0,void 0,function(){var i,r,s,u,a;return E(this,function(l){switch(l.label){case 0:for(r in i=!1,this.subscriptions)if(r.startsWith(t)){for(i=!0,s=0,u=this.subscriptions[r];s<u.length;s++)a=u[s],(e=this.eventSource)===null||e===void 0||e.removeEventListener(r,a);delete this.subscriptions[r]}return i?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return l.sent(),[3,3];case 2:this.disconnect(),l.label=3;case 3:return[2]}})})},n.prototype.unsubscribeByTopicAndListener=function(t,e){var i;return I(this,void 0,void 0,function(){var r,s;return E(this,function(u){switch(u.label){case 0:if(!Array.isArray(this.subscriptions[t])||!this.subscriptions[t].length)return[2];for(r=!1,s=this.subscriptions[t].length-1;s>=0;s--)this.subscriptions[t][s]===e&&(r=!0,delete this.subscriptions[t][s],this.subscriptions[t].splice(s,1),(i=this.eventSource)===null||i===void 0||i.removeEventListener(t,e));return r?(this.subscriptions[t].length||delete this.subscriptions[t],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:u.sent(),u.label=3;case 3:return[2]}})})},n.prototype.hasSubscriptionListeners=function(t){var e,i;if(this.subscriptions=this.subscriptions||{},t)return!!(!((e=this.subscriptions[t])===null||e===void 0)&&e.length);for(var r in this.subscriptions)if(!((i=this.subscriptions[r])===null||i===void 0)&&i.length)return!0;return!1},n.prototype.submitSubscriptions=function(){return I(this,void 0,void 0,function(){return E(this,function(t){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch(function(e){if(!(e!=null&&e.isAbort))throw e})]):[2]})})},n.prototype.getNonEmptySubscriptionTopics=function(){var t=[];for(var e in this.subscriptions)this.subscriptions[e].length&&t.push(e);return t},n.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var e=0,i=this.subscriptions[t];e<i.length;e++){var r=i[e];this.eventSource.addEventListener(t,r)}},n.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.subscriptions)for(var e=0,i=this.subscriptions[t];e<i.length;e++){var r=i[e];this.eventSource.removeEventListener(t,r)}},n.prototype.connect=function(){return I(this,void 0,void 0,function(){var t=this;return E(this,function(e){return this.reconnectAttempts>0?[2]:[2,new Promise(function(i,r){t.pendingConnects.push({resolve:i,reject:r}),t.pendingConnects.length>1||t.initConnect()})]})})},n.prototype.initConnect=function(){var t=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){t.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(e){t.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(e){var i=e;t.clientId=i==null?void 0:i.lastEventId,t.submitSubscriptions().then(function(){return I(t,void 0,void 0,function(){var r;return E(this,function(s){switch(s.label){case 0:r=3,s.label=1;case 1:return this.hasUnsentSubscriptions()&&r>0?(r--,[4,this.submitSubscriptions()]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var r=0,s=t.pendingConnects;r<s.length;r++)s[r].resolve();t.pendingConnects=[],t.reconnectAttempts=0,clearTimeout(t.reconnectTimeoutId),clearTimeout(t.connectTimeoutId)}).catch(function(r){t.clientId="",t.connectErrorHandler(r)})})},n.prototype.hasUnsentSubscriptions=function(){var t=this.getNonEmptySubscriptionTopics();if(t.length!=this.lastSentTopics.length)return!0;for(var e=0,i=t;e<i.length;e++){var r=i[e];if(!this.lastSentTopics.includes(r))return!0}return!1},n.prototype.connectErrorHandler=function(t){var e=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var i=0,r=this.pendingConnects;i<r.length;i++)r[i].reject(new Z(t));this.disconnect()}else{this.disconnect(!0);var s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){e.initConnect()},s)}},n.prototype.disconnect=function(t){var e;if(t===void 0&&(t=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),(e=this.eventSource)===null||e===void 0||e.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(var i=new Z(new Error("Realtime disconnected.")),r=0,s=this.pendingConnects;r<s.length;r++)s[r].reject(i);this.pendingConnects=[]}},n}(tt),Fe=function(o){function n(){return o!==null&&o.apply(this,arguments)||this}return P(n,o),n.prototype.check=function(t){return t===void 0&&(t={}),this.client.send("/api/health",{method:"GET",params:t})},n}(tt),Me=function(){function o(n,t,e){n===void 0&&(n="/"),e===void 0&&(e="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=n,this.lang=e,this.authStore=t||new Ee,this.admins=new je(this),this.collections=new Le(this),this.logs=new Ne(this),this.settings=new Te(this),this.realtime=new Ue(this),this.health=new Fe(this)}return o.prototype.collection=function(n){return this.recordServices[n]||(this.recordServices[n]=new Re(this,n)),this.recordServices[n]},o.prototype.autoCancellation=function(n){return this.enableAutoCancellation=!!n,this},o.prototype.cancelRequest=function(n){return this.cancelControllers[n]&&(this.cancelControllers[n].abort(),delete this.cancelControllers[n]),this},o.prototype.cancelAllRequests=function(){for(var n in this.cancelControllers)this.cancelControllers[n].abort();return this.cancelControllers={},this},o.prototype.send=function(n,t){var e,i,r,s,u,a,l,p;return I(this,void 0,void 0,function(){var c,d,h,v,b,w=this;return E(this,function(f){return(c=Object.assign({method:"GET"},t)).body&&c.body.constructor.name!=="FormData"&&(typeof c.body!="string"&&(c.body=JSON.stringify(c.body)),((e=c==null?void 0:c.headers)===null||e===void 0?void 0:e["Content-Type"])===void 0&&(c.headers=Object.assign({},c.headers,{"Content-Type":"application/json"}))),((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i["Accept-Language"])===void 0&&(c.headers=Object.assign({},c.headers,{"Accept-Language":this.lang})),!((r=this.authStore)===null||r===void 0)&&r.token&&((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s.Authorization)===void 0&&(c.headers=Object.assign({},c.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&((u=c.params)===null||u===void 0?void 0:u.$autoCancel)!==!1&&(d=((a=c.params)===null||a===void 0?void 0:a.$cancelKey)||(c.method||"GET")+n,this.cancelRequest(d),h=new AbortController,this.cancelControllers[d]=h,c.signal=h.signal),(l=c.params)===null||l===void 0||delete l.$autoCancel,(p=c.params)===null||p===void 0||delete p.$cancelKey,v=this.buildUrl(n),c.params!==void 0&&((b=this.serializeQueryParams(c.params))&&(v+=(v.includes("?")?"&":"?")+b),delete c.params),this.beforeSend&&(c=Object.assign({},this.beforeSend(v,c))),[2,fetch(v,c).then(function(m){return I(w,void 0,void 0,function(){var _;return E(this,function(y){switch(y.label){case 0:_={},y.label=1;case 1:return y.trys.push([1,3,,4]),[4,m.json()];case 2:return _=y.sent(),[3,4];case 3:return y.sent(),[3,4];case 4:if(this.afterSend&&(_=this.afterSend(m,_)),m.status>=400)throw new Z({url:m.url,status:m.status,data:_});return[2,_]}})})}).catch(function(m){throw new Z(m)})]})})},o.prototype.getFileUrl=function(n,t,e){e===void 0&&(e={});var i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(n.collectionId||n.collectionName)),i.push(encodeURIComponent(n.id)),i.push(encodeURIComponent(t));var r=this.buildUrl(i.join("/"));if(Object.keys(e).length){var s=new URLSearchParams(e);r+=(r.includes("?")?"&":"?")+s}return r},o.prototype.buildUrl=function(n){var t=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return n&&(t+=n.startsWith("/")?n.substring(1):n),t},o.prototype.serializeQueryParams=function(n){var t=[];for(var e in n)if(n[e]!==null){var i=n[e],r=encodeURIComponent(e);if(Array.isArray(i))for(var s=0,u=i;s<u.length;s++){var a=u[s];t.push(r+"="+encodeURIComponent(a))}else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")},o}();const B=[];function qe(o,n=R){let t;const e=new Set;function i(u){if(lt(o,u)&&(o=u,t)){const a=!B.length;for(const l of e)l[1](),B.push(l,o);if(a){for(let l=0;l<B.length;l+=2)B[l][0](B[l+1]);B.length=0}}}function r(u){i(u(o))}function s(u,a=R){const l=[u,a];return e.add(l),e.size===1&&(t=n(i)||R),u(o),()=>{e.delete(l),e.size===0&&(t(),t=null)}}return{set:i,update:r,subscribe:s}}const De="https://chat.zaknitsch.com:443",N=new Me(De),It=qe(N.authStore.model);N.authStore.onChange(()=>It.set(N.authStore.model));function Be(o){let n,t,e,i,r,s,u,a,l,p;return{c(){n=O("form"),t=O("input"),e=$(),i=O("input"),r=$(),s=O("button"),s.textContent="Sign Up",u=$(),a=O("button"),a.textContent="Login",S(t,"placeholder","Username"),S(t,"type","text"),S(i,"placeholder","password"),S(i,"type","password")},m(c,d){x(c,n,d),g(n,t),z(t,o[0]),g(n,e),g(n,i),z(i,o[1]),g(n,r),g(n,s),g(n,u),g(n,a),l||(p=[M(t,"input",o[6]),M(i,"input",o[7]),M(s,"click",o[4]),M(a,"click",o[3]),M(n,"submit",Wt(o[5]))],l=!0)},p(c,d){d&1&&t.value!==c[0]&&z(t,c[0]),d&2&&i.value!==c[1]&&z(i,c[1])},d(c){c&&A(n),l=!1,F(p)}}}function Ge(o){let n,t,e=o[2].username+"",i;return{c(){n=O("p"),t=q("Signed in as "),i=q(e)},m(r,s){x(r,n,s),g(n,t),g(n,i)},p(r,s){s&4&&e!==(e=r[2].username+"")&&ft(i,e)},d(r){r&&A(n)}}}function ze(o){let n;function t(r,s){return r[2]?Ge:Be}let e=t(o),i=e(o);return{c(){i.c(),n=Kt()},m(r,s){i.m(r,s),x(r,n,s)},p(r,[s]){e===(e=t(r))&&i?i.p(r,s):(i.d(1),i=e(r),i&&(i.c(),i.m(n.parentNode,n)))},i:R,o:R,d(r){i.d(r),r&&A(n)}}}function He(o,n,t){let e;Gt(o,It,c=>t(2,e=c));let i,r;async function s(){await N.collection("users").authWithPassword(i,r)}async function u(){try{const c={username:i,password:r,passwordConfirm:r,name:"TODO"};await N.collection("users").create(c),await s()}catch(c){t(1,r=""),console.error(`Error while creating new user ${i}:`,c)}}function a(c){ve.call(this,o,c)}function l(){i=this.value,t(0,i)}function p(){r=this.value,t(1,r)}return[i,r,e,s,u,a,l,p]}class Je extends Ot{constructor(n){super(),Ct(this,n,He,ze,lt,{})}}function Ke(o){const n=o-1;return n*n*n+1}function Nt(o,{delay:n=0,duration:t=400,easing:e=Dt}={}){const i=+getComputedStyle(o).opacity;return{delay:n,duration:t,easing:e,css:r=>`opacity: ${r*i}`}}function Ut(o,{delay:n=0,duration:t=400,easing:e=Ke}={}){const i=getComputedStyle(o),r=+i.opacity,s=parseFloat(i.height),u=parseFloat(i.paddingTop),a=parseFloat(i.paddingBottom),l=parseFloat(i.marginTop),p=parseFloat(i.marginBottom),c=parseFloat(i.borderTopWidth),d=parseFloat(i.borderBottomWidth);return{delay:n,duration:t,easing:e,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*r};height: ${h*s}px;padding-top: ${h*u}px;padding-bottom: ${h*a}px;margin-top: ${h*l}px;margin-bottom: ${h*p}px;border-top-width: ${h*c}px;border-bottom-width: ${h*d}px;`}}var V=(o=>(o.Messages="messages",o.Users="users",o))(V||{});function Ft(o,n,t){const e=o.slice();return e[9]=n[t],e}function Mt(o){let n,t,e,i=[],r=new Map,s,u,a,l,p,c,d,h,v,b=o[0];const w=f=>f[9].id;for(let f=0;f<b.length;f+=1){let m=Ft(o,b,f),_=w(m);r.set(_,i[f]=qt(_,m))}return{c(){n=O("div"),t=O("div"),e=$();for(let f=0;f<i.length;f+=1)i[f].c();u=$(),a=O("form"),l=O("input"),p=$(),c=O("button"),c.textContent="Send",S(t,"class","curtain svelte-b2lpnj"),S(n,"class","messages svelte-b2lpnj"),S(l,"placeholder","Message"),S(l,"type","text"),l.autofocus=!0,S(l,"class","svelte-b2lpnj"),S(c,"type","submit"),S(c,"class","svelte-b2lpnj"),S(a,"class","svelte-b2lpnj")},m(f,m){x(f,n,m),g(n,t),g(n,e);for(let _=0;_<i.length;_+=1)i[_].m(n,null);o[5](n),x(f,u,m),x(f,a,m),g(a,l),z(l,o[1]),g(a,p),g(a,c),d=!0,l.focus(),h||(v=[M(l,"input",o[6]),M(a,"submit",Wt(o[4]))],h=!0)},p(f,m){m&9&&(b=f[0],Qt(),i=Ce(i,m,w,1,f,b,r,n,Se,qt,null,Ft),Yt()),m&2&&l.value!==f[1]&&z(l,f[1])},i(f){if(!d){for(let m=0;m<b.length;m+=1)U(i[m]);J(()=>{s||(s=at(n,Ut,{},!0)),s.run(1)}),d=!0}},o(f){for(let m=0;m<i.length;m+=1)K(i[m]);s||(s=at(n,Ut,{},!1)),s.run(0),d=!1},d(f){f&&A(n);for(let m=0;m<i.length;m+=1)i[m].d();o[5](null),f&&s&&s.end(),f&&A(u),f&&A(a),h=!1,F(v)}}}function qt(o,n){var _;let t,e,i,r,s,u,a,l=((_=n[9].expand)==null?void 0:_.user.username)+"",p,c,d,h=n[9].text+"",v,b,w,f,m;return{key:o,first:null,c(){var y,k;t=O("div"),e=O("div"),i=O("img"),s=$(),u=O("small"),a=q("@"),p=q(l),c=$(),d=O("p"),v=q(h),b=$(),S(i,"class","avatar"),Tt(i.src,r=`https://avatars.dicebear.com/api/identicon/${((y=n[9].expand)==null?void 0:y.user.username)??"unknown-user"}.svg`)||S(i,"src",r),S(i,"alt","user avatar"),S(i,"width","30px"),S(u,"class","svelte-b2lpnj"),S(e,"class","info svelte-b2lpnj"),S(d,"class","msg-text svelte-b2lpnj"),S(t,"class",w="msg "+(n[3].id===((k=n[9].expand)==null?void 0:k.user.id)?"author":"recipient")+" svelte-b2lpnj"),this.first=t},m(y,k){x(y,t,k),g(t,e),g(e,i),g(e,s),g(e,u),g(u,a),g(u,p),g(t,c),g(t,d),g(d,v),g(t,b),m=!0},p(y,k){var C,T,j;n=y,(!m||k&1&&!Tt(i.src,r=`https://avatars.dicebear.com/api/identicon/${((C=n[9].expand)==null?void 0:C.user.username)??"unknown-user"}.svg`))&&S(i,"src",r),(!m||k&1)&&l!==(l=((T=n[9].expand)==null?void 0:T.user.username)+"")&&ft(p,l),(!m||k&1)&&h!==(h=n[9].text+"")&&ft(v,h),(!m||k&9&&w!==(w="msg "+(n[3].id===((j=n[9].expand)==null?void 0:j.user.id)?"author":"recipient")+" svelte-b2lpnj"))&&S(t,"class",w)},i(y){m||(J(()=>{f||(f=at(t,Nt,{},!0)),f.run(1)}),m=!0)},o(y){f||(f=at(t,Nt,{},!1)),f.run(0),m=!1},d(y){y&&A(t),y&&f&&f.end()}}}function We(o){let n,t,e=o[3]&&Mt(o);return{c(){e&&e.c(),n=Kt()},m(i,r){e&&e.m(i,r),x(i,n,r),t=!0},p(i,[r]){i[3]?e?(e.p(i,r),r&8&&U(e,1)):(e=Mt(i),e.c(),U(e,1),e.m(n.parentNode,n)):e&&(Qt(),K(e,1,1,()=>{e=null}),Yt())},i(i){t||(U(e),t=!0)},o(i){K(e),t=!1},d(i){e&&e.d(i),i&&A(n)}}}function Ve(o,n,t){let e;Gt(o,It,d=>t(3,e=d));let i=[],r,s;he(async()=>{const d=await N.collection(V.Messages).getList(1,50,{sort:"created",expand:"user"});t(0,i=d.items),s=await N.collection(V.Messages).subscribe("*",async({action:h,record:v})=>{if(h==="create"){const b=await N.collection(V.Users).getOne(v.user);v.expand={user:b},t(0,i=[...i,v])}h==="delete"&&t(0,i=i.filter(b=>b.id!==v.id))})});async function u(){const d={text:r,user:e==null?void 0:e.id};await N.collection(V.Messages).create(d),t(1,r="")}me(()=>s==null?void 0:s());let a,l;pe(()=>{l=a&&a.offsetHeight+a.scrollTop>a.scrollHeight-20}),fe(()=>{l&&a.scrollTo(0,a.scrollHeight)});function p(d){mt[d?"unshift":"push"](()=>{a=d,t(2,a)})}function c(){r=this.value,t(1,r)}return[i,r,a,e,u,p,c]}class Qe extends Ot{constructor(n){super(),Ct(this,n,Ve,We,lt,{})}}function Ye(o){let n,t,e,i,r,s;return e=new Je({}),r=new Qe({}),{c(){n=O("h1"),n.textContent="ZedChat",t=$(),Rt(e.$$.fragment),i=$(),Rt(r.$$.fragment)},m(u,a){x(u,n,a),x(u,t,a),bt(e,u,a),x(u,i,a),bt(r,u,a),s=!0},p:R,i(u){s||(U(e.$$.fragment,u),U(r.$$.fragment,u),s=!0)},o(u){K(e.$$.fragment,u),K(r.$$.fragment,u),s=!1},d(u){u&&A(n),u&&A(t),yt(e,u),u&&A(i),yt(r,u)}}}class Ze extends Ot{constructor(n){super(),Ct(this,n,null,Ye,lt,{})}}new Ze({target:document.getElementById("app")});
